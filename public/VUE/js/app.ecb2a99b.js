(function(){"use strict";var t={5113:function(t,e,a){var o=a(6848),r=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"app-wrapper"},[t._m(0),e("LeftMenu",{on:{"cambiar-componente":t.setAccion}}),e("main",{staticClass:"app-main"},[e("div",{staticClass:"app-content-header"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-6"},[e("h3",{staticClass:"mb-0"},[t._v(t._s(t.titulo))])]),t._m(1)])])]),e("div",{staticClass:"app-content"},[e("div",{staticClass:"container-fluid",attrs:{id:"dContent",name:"dContent"}},[e(t.accion,{tag:"component",attrs:{autor:t.autorActual},on:{volver:function(e){return t.setAccion("AutorList")},"cambiar-componente":t.setAccion}})],1)])]),e("Footer")],1)])},s=[function(){var t=this,e=t._self._c;return e("nav",{staticClass:"app-header navbar navbar-expand bg-body"},[e("div",{staticClass:"container-fluid"},[e("ul",{staticClass:"navbar-nav ms-auto"},[e("li",{staticClass:"nav-item"},[e("button",{staticClass:"btn btn-success"},[t._v("Ir a los post en vivo")])])])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-sm-6 d-none"},[e("ol",{staticClass:"breadcrumb float-sm-end"},[e("li",{staticClass:"breadcrumb-item"},[e("a",{attrs:{href:"#"}},[t._v("Home")])]),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("Dashboard")])])])}],n=function(){var t=this,e=t._self._c;return e("aside",{staticClass:"app-sidebar bg-body-secondary shadow",attrs:{"data-bs-theme":"dark"}},[t._m(0),e("div",{staticClass:"sidebar-wrapper"},[e("nav",{staticClass:"mt-2"},[e("ul",{staticClass:"nav sidebar-menu flex-column",attrs:{"data-lte-toggle":"treeview",role:"menu","data-accordion":"false"}},[e("li",{staticClass:"nav-header"},[t._v("AUTORES")]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.setAccion("AutorCreate")}}},[e("i",{staticClass:"bi bi-person-fill-add"}),e("p",[t._v("Crear")])])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.setAccion("AutorList")}}},[e("i",{staticClass:"bi bi-list-ul"}),e("p",[t._v("Listar")])])]),e("li",{staticClass:"nav-header"},[t._v("POSTS")]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.setAccion("PostCreate")}}},[e("i",{staticClass:"bi bi-pencil-square"}),e("p",[t._v("Crear")])])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.setAccion("PostList")}}},[e("i",{staticClass:"bi bi-list-ul"}),e("p",[t._v("Listar")])])])])])])])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"sidebar-brand"},[e("a",{staticClass:"brand-link",attrs:{href:"./index.html"}},[e("span",{staticClass:"brand-text fw-light"},[t._v("Gestión de blog")])])])}],l={name:"LeftMenu",data(){return{accion:null}},methods:{setAccion(t){this.accion=t,this.$emit("cambiar-componente",this.accion)}}},c=l,u=a(1656),m=(0,u.A)(c,n,i,!1,null,"940e8c58",null),d=m.exports,p=function(){var t=this;t._self._c;return t._m(0)},b=[function(){var t=this,e=t._self._c;return e("footer",{staticClass:"app-footer"},[e("div",{staticClass:"float-end d-none d-sm-inline"},[t._v("Anything you want")]),e("strong",[t._v(" Copyright © 2014-2024  "),e("a",{staticClass:"text-decoration-none",attrs:{href:"https://adminlte.io"}},[t._v("AdminLTE.io")]),t._v(". ")]),t._v(" All rights reserved. ")])}],f={name:"LeftMenu"},v=f,h=(0,u.A)(v,p,b,!1,null,"e1322d5a",null),_=h.exports,C=function(){var t=this,e=t._self._c;return e("form",[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"nombre"}},[t._v("Nombre")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.nombre,expression:"nombre"}],staticClass:"form-control",attrs:{type:"text",id:"nombre","aria-describedby":"name"},domProps:{value:t.nombre},on:{input:function(e){e.target.composing||(t.nombre=e.target.value)}}})]),e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"email"}},[t._v("Email ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email","aria-describedby":"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),1==t.create_errors.mail?e("div",{staticClass:"form-text",attrs:{id:"emailHelp"}},[t._v("We'll never share your email with anyone else.")]):t._e()]),e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"foto"}},[t._v("Seleccione una foto (opcional)")]),e("input",{staticClass:"form-control",attrs:{type:"file",id:"foto"},on:{change:t.manageFoto}}),t.foto?e("p",[t._v("Archivo seleccionado: "+t._s(t.foto.name))]):t._e()]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.crearAutor()}}},[t._v("Crear nuevo autor")])])},g=[],A={name:"AutorCreate",data(){return{nombre:"",email:"",foto:null,create_errors:{mail:!1,nombre:!1},response_errors:[]}},methods:{validateEmail(t=null){let e=t||this.email;return String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},crearAutor(){console.log("a crear autor");let t=0;if(this.validateEmail(this.email)||(this.create_errors.mail=!0,t+=1),this.nombre.length<3&&(this.create_errors.nombre=!0,t+=1),console.log("t errors ",t),t>0)return;let e=new FormData;e.append("nombre",this.nombre),e.append("email",this.email),null!=this.foto&&e.append("foto",this.foto);const a=document.head.querySelector('meta[name="csrf-token"]');let o={"Content-Type":"multipart/form-data",Accept:"application/json"};null!=a&&(o={"Content-Type":"multipart/form-data",Accept:"application/json","X-CSRF-TOKEN":a.content}),this.$axios.post("/autor/crear",e,{headers:o}).then((t=>{this.nombre="",this.email="",this.foto=null,this.create_errors.mail=!1,this.create_errors.nombre=!1,this.response_errors=[],this.$bootbox.confirm({message:t.data.msg,centerVertical:!0,buttons:{confirm:{label:"Volver al listado",className:"btn-success"},cancel:{label:"Crear otro",className:"btn-danger"}},callback:t=>{t&&this.$emit("volver")}})})).catch((t=>{console.error("Error al crear autor:",t),this.$bootbox.alert({message:"Error al intentar crear",size:"small",centerVertical:!0}),this.response_errors=t.response?.data||"Error desconocido"}))},manageFoto(t){const e=t.target.files[0];e?(this.foto=e,console.log(this.foto)):this.foto=null}}},y=A,x=(0,u.A)(y,C,g,!1,null,"77e2b48a",null),E=x.exports,S=function(){var t=this,e=t._self._c;return e("form",[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"nombre"}},[t._v("Nombre")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.nombre,expression:"nombre"}],staticClass:"form-control",attrs:{type:"text",id:"nombre","aria-describedby":"name"},domProps:{value:t.nombre},on:{input:function(e){e.target.composing||(t.nombre=e.target.value)}}})]),e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"email"}},[t._v("Email ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email","aria-describedby":"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),1==t.create_errors.mail?e("div",{staticClass:"form-text",attrs:{id:"emailHelp"}},[t._v("We'll never share your email with anyone else.")]):t._e()]),e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"foto"}},[t._v("Seleccione nueva foto (opcional)")]),e("input",{staticClass:"form-control",attrs:{type:"file",id:"foto"},on:{change:t.manageFoto}}),t.foto?e("p",[t._v("Archivo seleccionado: "+t._s(t.foto.name))]):t._e()]),null!=t.old_foto?e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[t._v(" Foto actual ")]),e("div",{staticClass:"card-body"},[e("img",{attrs:{src:t.$constants.APP_URL+"storage/autores/"+t.old_foto,alt:"foto",width:"120dp",height:"auto"}})])]):t._e(),e("br"),e("button",{staticClass:"btn btn-primary btn-sm m-1",attrs:{type:"button"},on:{click:function(e){return t.actualizarAutor()}}},[t._v("Actualizar autor")]),e("button",{staticClass:"btn btn-warning btn-sm m-1",attrs:{type:"button"},on:{click:function(e){return t.$emit("volver")}}},[t._v("Volver al listado")])])},L=[],P=a(3518),k={name:"AutorEdit",data(){return{id:null,nombre:"",email:"",foto:null,old_foto:null,create_errors:{mail:!1,nombre:!1},response_errors:[]}},methods:{validateEmail(t=null){let e=t||this.email;return String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},actualizarAutor(){let t=0;if(this.validateEmail(this.email)||(this.create_errors.mail=!0,t+=1),this.nombre.length<3&&(this.create_errors.nombre=!0,t+=1),t>0)return;let e=new FormData;e.append("id",this.id),e.append("nombre",this.nombre),e.append("email",this.email),null!=this.foto&&e.append("foto",this.foto);const a=document.head.querySelector('meta[name="csrf-token"]');let o={"Content-Type":"multipart/form-data",Accept:"application/json"};null!=a&&(o={"Content-Type":"multipart/form-data",Accept:"application/json","X-CSRF-TOKEN":a.content}),this.$axios.post("/autor/actualizar",e,{headers:o}).then((t=>{""!=t.data.data[0]&&(this.old_foto=t.data.data[0]),this.create_errors.mail=!1,this.create_errors.nombre=!1,this.response_errors=[],this.$bootbox.confirm({message:t.data.msg,centerVertical:!0,buttons:{confirm:{label:"Volver al listado",className:"btn-success"},cancel:{label:"Seguir editando",className:"btn-danger"}},callback:t=>{t&&this.$emit("volver")}})})).catch((t=>{console.error("Error al actualizar al autor:"),console.error(t),this.$bootbox.alert({message:"Error al intentar actualizar",size:"small",centerVertical:!0}),this.response_errors=t.response?.data||"Error desconocido"}))},manageFoto(t){const e=t.target.files[0];e?(this.foto=e,console.log(this.foto)):this.foto=null}},computed:{...(0,P.L8)(["getAutorSeleccionado"])},mounted(){console.log("Autor a editar:");const t=this.getAutorSeleccionado;t&&(this.id=t.Id,console.log("en editar, id es ",this.id),this.nombre=t.nombre,this.email=t.email,this.old_foto=t.foto)}},w=k,j=(0,u.A)(w,S,L,!1,null,"637b0b8c",null),$=j.exports,T=function(){var t=this,e=t._self._c;return e("div",[0===t.autores.length?e("p",[t._v("Cargando...")]):t._e(),t.autores.length>0?e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.autores,(function(a){return e("tr",{key:a.Id},[e("td",[e("button",{staticClass:"btn btn-primary btn-sm m-1",attrs:{type:"button"},on:{click:function(e){return t.editar(a.Id)}}},[t._v("Editar")]),e("button",{staticClass:"btn btn-danger btn-sm m-1",attrs:{type:"button"},on:{click:function(e){return t.borrar(a.Id)}}},[t._v("Eliminar")]),e("button",{staticClass:"btn btn-success btn-sm m-1",attrs:{type:"button"},on:{click:function(e){return t.verPosts(a.Id)}}},[t._v("Ver posts")])]),e("td",[t._v(t._s(a.nombre))]),e("td",[t._v(t._s(a.email))]),e("td",[e("img",{attrs:{src:t.$constants.APP_URL+"storage/autores/"+a.foto,alt:"foto",width:"60dp",height:"auto"}})]),e("td",[t._v(t._s(a.created_at))])])})),0)]):t._e()])},O=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("Acciones")]),e("th",{attrs:{scope:"col"}},[t._v("Nombre")]),e("th",{attrs:{scope:"col"}},[t._v("Email")]),e("th",{attrs:{scope:"col"}},[t._v("Foto")]),e("th",{attrs:{scope:"col"}},[t._v("Fecha creación")])])])}],N=(a(8111),a(116),{name:"AutorList",data(){return{autores:[],idAutorSelected:null}},methods:{...(0,P.i0)(["seleccionarAutor"]),loadList(){const t=document.head.querySelector('meta[name="csrf-token"]');let e={"Content-Type":"application/json",Accept:"application/json"};null!=t&&(e={"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":t.content}),this.$axios.get("/autor/list",{headers:e}).then((t=>{this.autores=t.data.data})).catch((t=>{console.error("Error al cargar lista de autores:"),console.log(t)}))},editar(t){let e=this.autores.find((e=>e.Id==t));this.seleccionarAutor(e),this.$emit("cambiar-componente","AutorEdit")},borrarConfirmado(){console.log("a borrar confirmado ",this.idAutorSelected);const t=document.head.querySelector('meta[name="csrf-token"]');let e={"Content-Type":"application/json",Accept:"application/json"};null!=t&&(e={"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":t.content}),this.$axios.post("/autor/borrar",{id:this.idAutorSelected},{headers:e}).then((t=>{this.$bootbox.alert({message:t.data.msg,size:"small",centerVertical:!0,callback:()=>{this.loadList()}})})).catch((t=>{console.error("Error al borrar al autor:"),console.error(t),this.$bootbox.alert({message:"Error al intentar borrar",size:"small",centerVertical:!0}),this.response_errors=t.response?.data||"Error desconocido"}))},borrar(t){this.idAutorSelected=t,this.$bootbox.confirm({message:"¿Está seguro de que desea borrar este autor?",centerVertical:!0,buttons:{confirm:{label:"Si, borrar",className:"btn-success"},cancel:{label:"No, cancelar",className:"btn-danger"}},callback:t=>{t&&this.borrarConfirmado()}})},verPosts(t){console.log("a ver los posts de este autor",t)}},mounted(){setTimeout((()=>{this.loadList()}),200)}}),z=N,F=(0,u.A)(z,T,O,!1,null,"1ee21170",null),R=F.exports,V=function(){var t=this,e=t._self._c;return e("div",[t._v(" PostCreate ")])},I=[],M={name:"PostCreate"},q=M,U=(0,u.A)(q,V,I,!1,null,"7674b0e5",null),K=U.exports,X=function(){var t=this,e=t._self._c;return e("div",[t._v(" PostList ")])},Z=[],D={name:"PostList"},H=D,W=(0,u.A)(H,X,Z,!1,null,"b9444e7a",null),B=W.exports,G={name:"App",components:{LeftMenu:d,Footer:_,AutorCreate:E,AutorEdit:$,AutorList:R,PostCreate:K,PostList:B},data(){return{titulo:"Seleccione una opción en el menú de la izquierda",accion:null,componenteActual:null,autorActual:null,acciones:["AutorCreate","AutorList","PostCreate","PostList","AutorEdit"],accionesTitulos:["Crear un nuevo autor","Listar todos los autores","Crear un nuevo post","Listar todos los posts","Editar un autor"]}},methods:{setAccion(t,e=null){console.log("compo setAccion ",t),this.accion=t,this.titulo=this.accionesTitulos[this.acciones.indexOf(this.accion)],"AutorEdit"===t&&(this.autorActual=e)}}},J=G,Q=(0,u.A)(J,r,s,!1,null,null,null),Y=Q.exports,tt=a(5168),et=(a(9313),a(323),a(4373)),at=a(954),ot=a.n(at);o["default"].use(P.Ay);var rt=new P.Ay.Store({state:{autorSeleccionado:null},mutations:{setAutor(t,e){t.autorSeleccionado=e}},actions:{seleccionarAutor({commit:t},e){t("setAutor",e)}},getters:{getAutorSeleccionado:t=>t.autorSeleccionado}});o["default"].use(tt.Ay$),o["default"].config.productionTip=!1,o["default"].prototype.$constants=Object.freeze({APP_URL:"https://test-blog.bitmo.co/",API_URL:"https://test-blog.bitmo.co/api/",APP_NAME:"Blog Manager",VERSION:"0.0.1"}),o["default"].prototype.$axios=et.A.create({baseURL:o["default"].prototype.$constants.API_URL,timeout:1e4,headers:{"Content-Type":"application/json"}}),o["default"].prototype.$bootbox=ot(),new o["default"]({store:rt,render:t=>t(Y)}).$mount("#app")}},e={};function a(o){var r=e[o];if(void 0!==r)return r.exports;var s=e[o]={exports:{}};return t[o].call(s.exports,s,s.exports,a),s.exports}a.m=t,function(){var t=[];a.O=function(e,o,r,s){if(!o){var n=1/0;for(u=0;u<t.length;u++){o=t[u][0],r=t[u][1],s=t[u][2];for(var i=!0,l=0;l<o.length;l++)(!1&s||n>=s)&&Object.keys(a.O).every((function(t){return a.O[t](o[l])}))?o.splice(l--,1):(i=!1,s<n&&(n=s));if(i){t.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[o,r,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,s,n=o[0],i=o[1],l=o[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(l)var u=l(a)}for(e&&e(o);c<n.length;c++)s=n[c],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(u)},o=self["webpackChunktest_blog"]=self["webpackChunktest_blog"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=a.O(void 0,[504],(function(){return a(5113)}));o=a.O(o)})();
//# sourceMappingURL=app.ecb2a99b.js.map